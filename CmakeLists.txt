cmake_minimum_required(VERSION 3.10)
project(MyFreeCADPlugin)

find_package(Qt5 COMPONENTS Core Widgets OpenGL REQUIRED)  # or Qt6
find_package(OpenGL REQUIRED)

# Adjust these paths as needed for your FreeCAD installation

include_directories(
        "${CONDA_PREFIX}/include"
        "/Users/dmitry057/Projects/DeepL/archi-ve/FreeCAD/build/release/lib"
)

link_directories(${FREECAD_LIB_DIR})

add_library(MyFreeCADPlugin MODULE
        My3DView.cpp
        MyDockWidget.cpp
        MyCommands.cpp
)

target_link_libraries(MyFreeCADPlugin
        Qt5::Core
        Qt5::Widgets
        Qt5::OpenGL    # or appropriate Qt6 targets
        ${OPENGL_LIBRARIES}
        # FreeCAD libraries:
        # The exact libs can vary depending on your version and what you need:
        # e.g.: -lFreeCADApp -lFreeCADBase -lFreeCADGui ...
        FreeCADApp
        FreeCADBase
        FreeCADGui
)

# On some platforms you may need properties to mark it as a FreeCAD module
# e.g. set_target_properties(MyFreeCADPlugin PROPERTIES SUFFIX ".so") or ".dylib" on macOS, etc.